# Extracting Stock Data Using a Web Scraping
## 1) Scenario
I am working for a new startup investment firm that helps customers invest their money in stocks.  
My job is to extract financial data like historical share price and quarterly revenue reportings from various sources using Python libraries and webscraping on popular stocks.  
After collecting this data I will visualize it in a dashboard to identify patterns or trends. The stocks I will work with are ***Apple, NVIDIA***.

## 2) Setup

```python
!pip install pandas
!pip install requests
!mamba install bs4
!pip install lxml
!pip install plotly
```
```python
import pandas as pd              # Importing the pandas library for data manipulation
import requests
import os                        # Importing the os library for operating system interactions
import json                      # Importing the json library for JSON file handling
from bs4 import Beautifulsoup
```

## 3) Steps
I will extract Nvidia stock data https://finance.yahoo.com/quote/NVDA/history/?frequency=1mo&period1=1533772800&period2=1717891200   

I am using yahoo finance website and looking to extract Nvidia data.  

![table1](https://github.com/Atikers/Images/blob/main/Project%20%234%20-%20image(1).jpg)  

### (1) Step 1 : Sending an HTTP request to the web page
I will use the request library for sending an HTTP request to the web page.  
```python
url="https://finance.yahoo.com/quote/NVDA/history/?frequency=1mo&period1=1533772800&period2=1717891200"
```
The `requests.get()` method takes a URL as its first argument, which specifies the location of the resource to be retrieved.  
In this project, the value of the url variable is passed as the argument to the `requests.get()` method,  
because I will store a web page URL in a url variable.  

I use the `.text` method for extracting the HTML content as a string in order to make it readable.  
```python
data=requests.get(url).text
print(data)
```

### (2) Step 2 : Parsing the HTML content

**Parsing the data using the BeautifulSoup library**
```python
soup=BeautifulSoup(data, 'html.parser')
```

### (3) Step 3 : Extracting Dividends
Dividends are the distribution of a companys profits to shareholders.    
In this project, they are defined as an amount of money returned per share an investor owns.    
Using the variable dividends I can get a dataframe of the data.    
The period of the data is given by the period defined in the 'history` function.    
```python
Apple.dividends
```
Then, I get the following :    
![table1](https://github.com/Atikers/Images/blob/main/Project%20%233%20-%20image(2).jpg)

And I can plot the dividends overtime:    
```python 
Apple.dividends.plot()
```
Then, I get the following :    
![graph2](https://github.com/Atikers/Images/blob/main/Project%20%233%20-%20image(3).jpg)

### (4) Stpe 4 : NVIDIA
Now using the `Tikcer` module create an object for ***NVIDIA*** with the ticker symbol is ***NVDA*** called; name the object `Nvidia`
```python
Nvidia=yf.Ticker("NVDA")        # Creating a Ticker object for Nvidia using Yahoo Finance (ticker symbol: NVDA)
```
```python
Nvidia_info=Nvidia.info         # Retrieving the information dictionary for Nvidia
```
```python
current_directory=os.getcwd()   # Getting the current working directory
print(f"Current working directory : {current_directory}")        # Printing the current working directory
```
```python
json_file_path=os.path.join(current_directory, 'Nvidia.json')        # Creating the full file path for 'Nvidia.json' in the current directory
```
```python
with open(json_file_path, 'w') as json_file:    # Opening the file 'Nvidia.json' in write mode
    json.dump(Nvidia_info, json_file)           # Writing the Nvidia information to the JSON file
```
```python
with open(json_file_path) as json_file:         # Opening 'Nvidia.json' file in read mode
    Nvidia_info_loaded=json.load(json_file)     # Loading the information from the JSON file into Nvidia_info_loaded
print(Nvidia_info_loaded)
```
```python
Nvidia_share_price_data=Nvidia.history(period="max")        # Retrieving the historical share price data for Nvidia with the maximum available period
```
```python
Nvidia_share_price_data.head()        # Displaying the first few rows of the historical share price data for Nvidia
```
Then, I get the following:    
![table2](https://github.com/Atikers/Images/blob/main/Project%20%233%20-%20image(4).jpg)

```python
Nvidia_share_price_data.reset_index(inplace=True)        # Resetting the index of the share price data to use default integer indexing
```
```python
Nvidia_share_price_data.plot(x="Date", y="Open")        # Plotting the opening share price over time with Date on the x-axis
```
Then, I get the following:    
![graph3](https://github.com/Atikers/Images/blob/main/Project%20%233%20-%20image(5).jpg)
```python
Nvidia.dividends        # Accessing the dividends data for Nvidia
```
```python
Nvidia.dividends.plot()        # Plotting the dividends data
```
Then, I get the following:    
![graph4](https://github.com/Atikers/Images/blob/main/Project%20%233%20-%20image(6).jpg)





